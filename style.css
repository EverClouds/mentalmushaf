/* ---- Global Styles ---- */
body { background-color: #fdfaf3; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333; margin: 0; padding: 15px; direction: rtl; }

/* ---- Modal Styles ---- */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 1000; display: flex; justify-content: center; align-items: center; }
.modal-content { background-color: #fdfaf3; padding: 30px; border-radius: 12px; text-align: center; max-width: 400px; width: 90%; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
.modal-content h2 { margin-top: 0; color: #5a4a42; }
.menu-option-btn { display: block; width: 100%; padding: 15px; margin-bottom: 15px; font-size: 18px; font-weight: bold; border: 2px solid #c5bcae; background-color: #fff; color: #5a4a42; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; }
.menu-option-btn:hover:not(.is-disabled) { background-color: #5a4a42; color: white; border-color: #5a4a42; }
.menu-option-btn.is-disabled { color: #aaa; background-color: #f0f0f0; border-color: #ddd; cursor: not-allowed; }
#close-modal-btn { margin-top: 20px; background: none; border: none; font-size: 16px; color: #5a4a42; cursor: pointer; }

/* ---- Shared Layout Components (FIXED) ---- */
header h1, .status-bar, main, footer, .leaderboard-container, .mode-switcher, #question-area, .color-key-container {
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
}
header h1 { text-align: center; color: #5a4a42; margin-bottom: 20px; }
.status-bar { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background-color: #e8e2d8; border-radius: 6px; font-size: 18px; font-weight: bold; color: #5a4a42; }
footer { text-align: center; margin-top: 25px; }

/* ---- Input Area and Buttons ---- */
.input-area { display: flex; flex-direction: column; align-items: center; gap: 10px; }
.input-area input { width: 90%; max-width: 400px; padding: 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; text-align: right; }
.input-area button { width: 90%; max-width: 400px; padding: 12px 20px; font-size: 16px; border-radius: 4px; cursor: pointer; border: none; white-space: nowrap; }
#submit-button { background-color: #5a4a42; color: white; }
#show-all-btn { background-color: #a0937d; color: white; }
#huroof-btn { background-color: #c0392b; color: white; }
#makki-madani-btn { background-color: #005A9C; color: white; }
#feedback-message { margin-top: 15px; font-size: 16px; font-weight: bold; height: 20px; }
.feedback-correct { color: #2e6b2e; } .feedback-warning { color: #b5651d; } .feedback-error { color: #c0392b; }

/* ---- Color Key ---- */
.color-key-container { display: flex; justify-content: center; gap: 20px; margin-top: 20px; font-size: 14px; }
.key-item { display: flex; align-items: center; gap: 8px; }
.color-box { width: 18px; height: 18px; border-radius: 4px; border: 1px solid rgba(0,0,0,0.1); }
.color-box.makki { background-color: #e87b00; }
.color-box.madani { background-color: #6a0dad; }

/* ---- Question & Action Area ---- */
#question-area { text-align: center; font-size: 24px; color: #5a4a42; margin: 40px auto 20px; padding: 20px; background-color: #f8f4ec; border-radius: 8px; }
.game-actions { display: flex; justify-content: center; gap: 15px; margin-top: 10px; }
.game-actions button { background-color: #a0937d; color: white; width: 44%; max-width: 192px; padding: 12px; font-size: 16px; border-radius: 4px; cursor: pointer; border: none; }
.classification-btn { font-weight: bold; }
#makki-btn { background-color: #e87b00; }
#madani-btn { background-color: #6a0dad; }

/* ---- Game Mode Switcher ---- */
.mode-switcher { text-align: center; margin-top: 20px; margin-bottom: 20px; }
.mode-btn { padding: 8px 25px; font-size: 16px; font-weight: bold; border: 2px solid #c5bcae; background-color: transparent; color: #5a4a42; border-radius: 20px; cursor: pointer; transition: all 0.2s ease; margin: 0 5px; }
.mode-btn.active { background-color: #5a4a42; color: white; border-color: #5a4a42; }

/* --- Leaderboard & Grid Styles --- */
.leaderboard-container { padding: 15px; background-color: #f8f4ec; border: 1px solid #e0d9cd; border-radius: 8px; margin-top: 30px; max-width: 800px; }
.leaderboard-container h2 { display: flex; justify-content: center; align-items: center; gap: 10px; text-align: center; margin-top: 0; color: #5a4a42; cursor: pointer; user-select: none; }
#toggle-arrow { display: inline-block; transition: transform 0.3s ease; }
#leaderboard-list { list-style: none; padding: 0; margin: 0; max-height: 1000px; overflow: hidden; transition: max-height 0.5s ease-in-out; }
.leaderboard-container.is-collapsed #leaderboard-list { max-height: 0; }
.leaderboard-container.is-collapsed #toggle-arrow { transform: rotate(-90deg); }
#leaderboard-list li { display: flex; justify-content: space-between; align-items: center; padding: 12px; border-radius: 6px; margin-bottom: 6px; border: 1px solid #e0d9cd; font-size: 17px; }
.rank-1 { border-color: #FFD700; background-color: #fffbef; }
.rank-2 { border-color: #C0C0C0; background-color: #f7f7f7; }
.rank-3 { border-color: #CD7F32; background-color: #fbf5ef; }
.rank-1::before, .rank-2::before, .rank-3::before { margin-left: 10px; font-size: 20px; }
.rank-1::before { content: 'ðŸ¥‡'; } .rank-2::before { content: 'ðŸ¥ˆ'; } .rank-3::before { content: 'ðŸ¥‰'; }
.grid-container { display: grid; background-color: #f8f4ec; border: 1px solid #e0d9cd; border-radius: 8px; grid-auto-flow: column; margin-top: 20px; }
.game-item { display: flex; align-items: center; border-bottom: 1px dotted #c5bcae; }
.item-number { font-weight: bold; color: #5a4a42; }
.item-name { color: #2e6b2e; font-weight: bold; margin-right: 8px; }
.game-item.is-special .item-number, .game-item.is-special .item-name { color: #005A9C; }
.huroof-mode-active .game-item.is-huroof .item-number, .huroof-mode-active .game-item.is-huroof .item-name { color: #c0392b !important; }
.huroof-mode-active .game-item.is-special:not(.is-huroof) .item-number { color: #5a4a42; }
.huroof-mode-active .game-item.is-special:not(.is-huroof) .item-name { color: #2e6b2e; }
.classification-mode-active .game-item.is-makki .item-number, .classification-mode-active .game-item.is-makki .item-name { color: #e87b00 !important; }
.classification-mode-active .game-item.is-madani .item-number, .classification-mode-active .game-item.is-madani .item-name { color: #6a0dad !important; }

/* --- GRID LAYOUTS --- */
#surahs-grid-container { grid-template-rows: repeat(23, auto); grid-template-columns: repeat(5, 1fr); gap: 5px 15px; padding: 15px; }
#surahs-grid-container .game-item { padding: 5px 0; font-size: 12px; }
#surahs-grid-container .item-name { margin-right: 5px; }
#prophets-grid-container { grid-template-rows: repeat(5, auto); grid-template-columns: repeat(5, 1fr); gap: 8px 20px; padding: 20px; max-width: 800px; margin-left: auto; margin-right: auto; }
#prophets-grid-container .game-item { padding: 8px 0; font-size: 16px; }

/* --- PC Overrides --- */
@media (min-width: 768px) {
    header h1, .status-bar, main, footer, .leaderboard-container, .mode-switcher, #question-area, .color-key-container { max-width: 1200px; }
    .leaderboard-container { max-width: 800px; }
    .input-area { flex-direction: row; justify-content: center; gap: 15px; }
    .input-area input { flex-grow: 1; width: auto; }
    .input-area button { width: auto; }
    #surahs-grid-container { grid-template-rows: repeat(19, auto); grid-template-columns: repeat(6, 1fr); gap: 5px 40px; padding: 20px; }
    #surahs-grid-container .game-item { padding: 6px 0; font-size: 15px; }
    #surahs-grid-container .item-name { margin-right: 8px; }
}